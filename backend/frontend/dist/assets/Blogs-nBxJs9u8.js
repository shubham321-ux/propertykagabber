import{r,j as e,a as I,I as _,J as F,K as L}from"./index-B8BtoGsn.js";import{c as P,E as M,P as z}from"./pen-Bk-P9B-P.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],R=P("trash-2",A);function q(){const[u,c]=r.useState([]),[n,d]=r.useState({title:"",description:"",content:""}),[h,x]=r.useState(null),[b,j]=r.useState(null),[B,y]=r.useState(!0),[a,i]=r.useState(null),[o,f]=r.useState(null),[w,p]=r.useState(null),[v,g]=r.useState(null),C=async()=>{try{y(!0);const t=await I();c(Array.isArray(t)?t:[])}catch(t){console.error("Error loading blogs:",t)}finally{y(!1)}};r.useEffect(()=>{C()},[]);const S=async t=>{t.preventDefault();const l=new FormData;l.append("title",n.title),l.append("description",n.description),l.append("content",n.content),h&&l.append("image",h);try{const s=await _(l);c([s,...u]),d({title:"",description:"",content:""}),x(null),j(null),alert("✅ Blog created successfully!")}catch(s){console.error(s),alert("❌ Failed to create blog")}},D=async t=>{if(window.confirm("Delete this blog?"))try{await F(t),c(l=>l.filter(s=>s._id!==t)),alert("🗑️ Blog deleted successfully!")}catch(l){console.error(l),alert("❌ Failed to delete blog")}},k=async t=>{if(t.preventDefault(),!a)return;const l=new FormData;l.append("title",a.title),l.append("description",a.description),l.append("content",a.content),w&&l.append("image",w);try{const s=await L(a._id,l);c(E=>E.map(N=>N._id===s._id?s:N)),i(null),p(null),g(null),alert("✅ Blog updated successfully!")}catch(s){console.error(s),alert("❌ Failed to update blog")}},m=t=>t?t.startsWith("http")?t:`${window.location.origin}${t}`:null;return e.jsxs("div",{className:"max-w-[1400px] mx-auto p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-6",children:"Manage Blogs"}),e.jsxs("form",{onSubmit:S,className:"bg-white shadow-md rounded-lg p-6 mb-6 space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Blog Title",value:n.title,onChange:t=>d({...n,title:t.target.value}),required:!0,className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"text",placeholder:"Short Description",value:n.description,onChange:t=>d({...n,description:t.target.value}),required:!0,className:"w-full border rounded px-3 py-2"}),e.jsx("textarea",{placeholder:"Full Blog Content",value:n.content,onChange:t=>d({...n,content:t.target.value}),required:!0,rows:5,className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"file",onChange:t=>{const l=t.target.files[0];x(l),j(l?URL.createObjectURL(l):null)},className:"w-full"}),b&&e.jsx("img",{src:b,alt:"Preview",className:"w-28 h-20 object-cover rounded"}),e.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary-light transition",children:"➕ Add Blog"})]}),B?e.jsx("p",{className:"text-gray-500",children:"Loading blogs..."}):u.length===0?e.jsx("p",{className:"text-gray-500",children:"No blogs found."}):e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b text-left",children:"Title"}),e.jsx("th",{className:"p-3 border-b text-left",children:"Description"}),e.jsx("th",{className:"p-3 border-b text-left",children:"Image"}),e.jsx("th",{className:"p-3 border-b text-right",children:"Actions"})]})}),e.jsx("tbody",{children:u.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition border-b",children:[e.jsx("td",{className:"p-3 font-medium",children:t.title}),e.jsxs("td",{className:"p-3 text-sm text-gray-600",children:[t.description||t.content.slice(0,60),"..."]}),e.jsx("td",{className:"p-3",children:t.image&&e.jsx("img",{src:m(t.image),alt:t.title,className:"w-20 h-16 object-cover rounded"})}),e.jsxs("td",{className:"p-3 text-right flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>f(t),className:"bg-blue-500 text-white p-2 rounded hover:bg-blue-600",title:"View Details",children:e.jsx(M,{size:18})}),e.jsx("button",{onClick:()=>i(t),className:"bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600",title:"Edit Blog",children:e.jsx(z,{size:18})}),e.jsx("button",{onClick:()=>D(t._id),className:"bg-red-600 text-white p-2 rounded hover:bg-red-700",title:"Delete Blog",children:e.jsx(R,{size:18})})]})]},t._id))})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[500px] max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl font-bold text-primary mb-4",children:o.title}),o.image&&e.jsx("img",{src:m(o.image),alt:o.title,className:"w-full h-64 object-cover rounded mb-4"}),e.jsxs("p",{className:"text-gray-700 mb-3",children:[e.jsx("b",{children:"Description:"})," ",o.description]}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:o.content}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:()=>f(null),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("form",{onSubmit:k,className:"bg-white p-6 rounded-lg shadow-lg w-96 space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-primary",children:"✏️ Edit Blog"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>i({...a,title:t.target.value}),className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"text",value:a.description||"",placeholder:"Short Description",onChange:t=>i({...a,description:t.target.value}),className:"w-full border rounded px-3 py-2"}),e.jsx("textarea",{value:a.content,onChange:t=>i({...a,content:t.target.value}),rows:5,className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"file",onChange:t=>{const l=t.target.files[0];p(l),g(l?URL.createObjectURL(l):null)},className:"w-full"}),v?e.jsx("img",{src:v,alt:"New Preview",className:"w-28 h-20 object-cover rounded"}):a.image&&e.jsx("img",{src:m(a.image),alt:"Current",className:"w-28 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{i(null),p(null),g(null)},className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary-light",children:"Save"})]})]})})]})}export{q as default};
