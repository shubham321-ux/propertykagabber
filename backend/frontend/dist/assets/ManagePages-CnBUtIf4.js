import{r,j as e,S as N,T as f,U as w}from"./index-Bb44EgIv.js";import{A as v}from"./AdminActionLoader-Bz-KwbY8.js";import{E as k,P}from"./pen-BpZywjR0.js";function A(){const[c,b]=r.useState([]),[u,n]=r.useState(!1),[a,o]=r.useState(null),[l,x]=r.useState(null),[g,p]=r.useState(!1),[t,d]=r.useState({name:"",title:"",description:"",keywords:"",sections:[{heading:"",content:""}]}),m=async()=>{try{const s=await N();b(s)}catch(s){console.error("Error loading pages:",s)}};r.useEffect(()=>{m()},[]);const h=()=>{d({name:"",title:"",description:"",keywords:"",sections:[{heading:"",content:""}]}),x(null)},j=async s=>{s.preventDefault(),p(!0);try{l?await f(l,t):await w(t),h(),n(!1),m()}catch(i){console.error("Error saving page:",i)}},y=s=>{x(s.name),d(s),n(!0)};return e.jsxs("div",{className:"max-w-[1400px] mx-auto p-6",children:[g&&e.jsx(v,{text:l?"Updating Page...":"Adding Page..."}),e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Manage Pages"})}),c.length===0?e.jsx("p",{className:"text-gray-500",children:"No pages found."}):e.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b",children:"Title"}),e.jsx("th",{className:"p-3 border-b",children:"Slug"}),e.jsx("th",{className:"p-3 border-b",children:"Description"}),e.jsx("th",{className:"p-3 border-b",children:"Keywords"}),e.jsx("th",{className:"p-3 border-b text-right",children:"Actions"})]})}),e.jsx("tbody",{children:c.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"p-3 border-b font-medium",children:s.title}),e.jsx("td",{className:"p-3 border-b text-gray-600",children:s.name}),e.jsxs("td",{className:"p-3 border-b text-sm text-gray-600",children:[s.description?.slice(0,50)||"-","..."]}),e.jsx("td",{className:"p-3 border-b text-sm text-gray-500",children:s.keywords||"-"}),e.jsxs("td",{className:"p-3 border-b text-right flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>o(s),className:"bg-blue-500 text-white p-2 rounded hover:bg-blue-600",title:"View Details",children:e.jsx(k,{size:18})}),e.jsx("button",{onClick:()=>y(s),className:"bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600",title:"Edit",children:e.jsx(P,{size:18})})]})]},s._id))})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-[600px] max-h-[85vh] overflow-y-auto p-6",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-primary",children:l?"Edit Page":"Add Page"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Slug (unique name)"}),e.jsx("input",{type:"text",placeholder:"e.g. about-us",value:t.name,onChange:s=>d({...t,name:s.target.value}),disabled:!!l,required:!0,className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Meta Title"}),e.jsx("input",{type:"text",placeholder:"Page Title",value:t.title,onChange:s=>d({...t,title:s.target.value}),required:!0,disabled:!!l,className:"w-full border rounded px-3 py-2 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Meta Description"}),e.jsx("textarea",{placeholder:"Short page description",value:t.description,onChange:s=>d({...t,description:s.target.value}),rows:3,className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Meta Keywords"}),e.jsx("input",{type:"text",placeholder:"e.g. about, builder, company",value:t.keywords,onChange:s=>d({...t,keywords:s.target.value}),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:()=>{h(),n(!1)},className:"px-4 py-2 border rounded",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded",children:l?"Update Page":"Add Page"})]})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 animate-fade",children:e.jsxs("div",{className:"bg-white/20 backdrop-blur-md border border-white/30 rounded-2xl shadow-lg w-[600px] max-h-[85vh] overflow-y-auto p-6 text-white",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-accent",children:a.title}),e.jsxs("p",{className:"mb-2",children:[e.jsx("b",{children:"Slug:"})," ",a.name]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("b",{children:"Description:"})," ",a.description]}),e.jsxs("p",{className:"mb-4",children:[e.jsx("b",{children:"Keywords:"})," ",a.keywords]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-lg font-semibold",children:"Sections"}),a.sections?.length?a.sections.map((s,i)=>e.jsxs("div",{className:"bg-white/10 border border-white/20 p-3 rounded-xl",children:[e.jsx("h5",{className:"font-semibold mb-1",children:s.heading}),e.jsx("div",{className:"text-sm text-neutral-200",dangerouslySetInnerHTML:{__html:s.content}})]},i)):e.jsx("p",{className:"text-gray-300",children:"No sections available."})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:()=>o(null),className:"bg-accent px-4 py-2 rounded-lg text-white hover:bg-accent/80",children:"Close"})})]})})]})}export{A as default};
