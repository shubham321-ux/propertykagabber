import{r as c,j as e,d as y,N,P as v}from"./index-8dGQ0MGw.js";import{M as C}from"./Modal-DGmiSAMp.js";function A(){const[l,j]=c.useState(null),[g,d]=c.useState(!1),[s,o]=c.useState({phone:[""],email:[""],address:[""],socialLinks:[{platform:"",url:""}],youtube:"",mapLink:"",aboutText:"",workingHours:""}),[f,p]=c.useState(!1),h=async()=>{try{const t=await y();t?.contact&&(j(t.contact),o({phone:t.contact.phone?.length?t.contact.phone:[""],email:t.contact.email?.length?t.contact.email:[""],address:t.contact.address?.length?t.contact.address:[""],socialLinks:t.contact.socialLinks?.length>0?t.contact.socialLinks:[{platform:"",url:""}],youtube:t.contact.youtube||"",mapLink:t.contact.mapLink||"",aboutText:t.contact.aboutText||"",workingHours:t.contact.workingHours||""}))}catch(t){console.error("Error loading contact:",t)}};c.useEffect(()=>{h()},[]);const m=(t,a,n,r)=>{const x=[...s[r]];x[t]=n,o({...s,[r]:x})},i=(t,a)=>{o({...s,[t]:[...s[t],a]})},u=(t,a)=>{const n=s[t].filter((r,x)=>x!==a);o({...s,[t]:n.length?n:[""]})},b=(t,a,n)=>{const r=[...s.socialLinks];r[t][a]=n,o({...s,socialLinks:r})},k=async t=>{t.preventDefault(),p(!0);try{const a={...s};l?._id?await N(a):await v(a),await h(),d(!1)}catch(a){console.error("Error saving contact:",a)}finally{p(!1)}};return e.jsxs("div",{className:"max-w-[1200px] mx-auto p-4 sm:p-6",children:[f&&e.jsx(AdminActionLoader,{text:"Saving Contact Info..."}),e.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"📞 Manage Contact Info"}),e.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:l?"Edit Contact":"➕ Add Contact"})]}),l?e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 sm:p-6 space-y-2 sm:space-y-3 text-sm sm:text-base",children:[e.jsxs("p",{children:[e.jsx("b",{children:"📞 Phone:"})," ",l.phone?.join(", ")||"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"📧 Email:"})," ",l.email?.join(", ")||"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"🏠 Address:"})," ",l.address?.join(", ")||"N/A"]}),e.jsx("p",{children:e.jsx("b",{children:"🔗 Social Links:"})}),e.jsx("ul",{className:"list-disc ml-6",children:l.socialLinks?.map((t,a)=>e.jsxs("li",{children:[e.jsxs("b",{children:[t.platform,":"]})," ",e.jsx("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline",children:t.url})]},a))}),e.jsxs("p",{children:[e.jsx("b",{children:"📺 YouTube:"})," ",l.youtube||"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"🗺️ Map Link:"})," ",l.mapLink||"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"ℹ️ About Text:"})," ",l.aboutText||"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"🕒 Working Hours:"})," ",l.workingHours||"N/A"]})]}):e.jsx("p",{className:"text-gray-500",children:"No contact info found. Please add one."}),e.jsx(C,{open:g,onClose:()=>d(!1),title:"Edit Contact Info",children:e.jsxs("form",{onSubmit:k,className:"space-y-3 max-h-[80vh] overflow-y-auto p-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold block mb-1",children:"Phone Numbers"}),s.phone.map((t,a)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:t,onChange:n=>m(a,"phone",n.target.value,"phone"),className:"flex-1 border rounded px-3 py-2",placeholder:"Enter phone number"}),s.phone.length>1&&e.jsx("button",{type:"button",onClick:()=>u("phone",a),className:"text-red-600 font-bold",children:"✕"})]},a)),e.jsx("button",{type:"button",onClick:()=>i("phone",""),className:"text-blue-600 text-sm",children:"+ Add another phone"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold block mb-1",children:"Emails"}),s.email.map((t,a)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"email",value:t,onChange:n=>m(a,"email",n.target.value,"email"),className:"flex-1 border rounded px-3 py-2",placeholder:"Enter email"}),s.email.length>1&&e.jsx("button",{type:"button",onClick:()=>u("email",a),className:"text-red-600 font-bold",children:"✕"})]},a)),e.jsx("button",{type:"button",onClick:()=>i("email",""),className:"text-blue-600 text-sm",children:"+ Add another email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold block mb-1",children:"Addresses"}),s.address.map((t,a)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("textarea",{value:t,onChange:n=>m(a,"address",n.target.value,"address"),className:"flex-1 border rounded px-3 py-2",placeholder:"Enter address"}),s.address.length>1&&e.jsx("button",{type:"button",onClick:()=>u("address",a),className:"text-red-600 font-bold",children:"✕"})]},a)),e.jsx("button",{type:"button",onClick:()=>i("address",""),className:"text-blue-600 text-sm",children:"+ Add another address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold block mb-1",children:"Social Links"}),s.socialLinks.map((t,a)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:t.platform,onChange:n=>b(a,"platform",n.target.value),placeholder:"Platform (e.g., Facebook)",className:"border rounded px-3 py-2 flex-1"}),e.jsx("input",{type:"text",value:t.url,onChange:n=>b(a,"url",n.target.value),placeholder:"URL",className:"border rounded px-3 py-2 flex-1"}),s.socialLinks.length>1&&e.jsx("button",{type:"button",onClick:()=>u("socialLinks",a),className:"text-red-600 font-bold",children:"✕"})]},a)),e.jsx("button",{type:"button",onClick:()=>i("socialLinks",{platform:"",url:""}),className:"text-blue-600 text-sm",children:"+ Add another social link"})]}),e.jsx("input",{type:"text",name:"youtube",value:s.youtube,onChange:t=>o({...s,youtube:t.target.value}),placeholder:"YouTube Link",className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"text",name:"mapLink",value:s.mapLink,onChange:t=>o({...s,mapLink:t.target.value}),placeholder:"Google Map Link",className:"w-full border rounded px-3 py-2"}),e.jsx("textarea",{name:"aboutText",value:s.aboutText,onChange:t=>o({...s,aboutText:t.target.value}),placeholder:"Short About Text",className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"text",name:"workingHours",value:s.workingHours,onChange:t=>o({...s,workingHours:t.target.value}),placeholder:"Working Hours (e.g. Mon–Sat 9AM–7PM)",className:"w-full border rounded px-3 py-2"}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border rounded",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Save"})]})]})})]})}export{A as default};
