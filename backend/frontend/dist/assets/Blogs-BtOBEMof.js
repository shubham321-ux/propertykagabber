import{r,j as e,a as E,J as I,K as _,M as F}from"./index-B45e3eNl.js";import{c as L,E as M,P}from"./pen-RrIJVVgg.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],z=L("trash-2",$);function U(){const[u,c]=r.useState([]),[n,d]=r.useState({title:"",description:"",content:""}),[m,x]=r.useState(null),[h,b]=r.useState(null),[N,j]=r.useState(!0),[a,i]=r.useState(null),[o,y]=r.useState(null),[w,g]=r.useState(null),[f,p]=r.useState(null),B=async()=>{try{j(!0);const t=await E();c(Array.isArray(t)?t:[])}catch(t){console.error("Error loading blogs:",t)}finally{j(!1)}};r.useEffect(()=>{B()},[]);const C=async t=>{t.preventDefault();const l=new FormData;l.append("title",n.title),l.append("description",n.description),l.append("content",n.content),m&&l.append("image",m);try{const s=await I(l);c([s,...u]),d({title:"",description:"",content:""}),x(null),b(null),alert("âœ… Blog created successfully!")}catch(s){console.error(s),alert("âŒ Failed to create blog")}},S=async t=>{if(window.confirm("Delete this blog?"))try{await _(t),c(l=>l.filter(s=>s._id!==t)),alert("ðŸ—‘ï¸ Blog deleted successfully!")}catch(l){console.error(l),alert("âŒ Failed to delete blog")}},D=async t=>{if(t.preventDefault(),!a)return;const l=new FormData;l.append("title",a.title),l.append("description",a.description),l.append("content",a.content),w&&l.append("image",w);try{const s=await F(a._id,l);c(k=>k.map(v=>v._id===s._id?s:v)),i(null),g(null),p(null),alert("âœ… Blog updated successfully!")}catch(s){console.error(s),alert("âŒ Failed to update blog")}};return e.jsxs("div",{className:"max-w-[1400px] mx-auto p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-6",children:"Manage Blogs"}),e.jsxs("form",{onSubmit:C,className:"bg-white shadow-md rounded-lg p-6 mb-6 space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Blog Title",value:n.title,onChange:t=>d({...n,title:t.target.value}),required:!0,className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"text",placeholder:"Short Description",value:n.description,onChange:t=>d({...n,description:t.target.value}),required:!0,className:"w-full border rounded px-3 py-2"}),e.jsx("textarea",{placeholder:"Full Blog Content",value:n.content,onChange:t=>d({...n,content:t.target.value}),required:!0,rows:5,className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"file",onChange:t=>{const l=t.target.files[0];x(l),b(l?URL.createObjectURL(l):null)},className:"w-full"}),h&&e.jsx("img",{src:h,alt:"Preview",className:"w-28 h-20 object-cover rounded"}),e.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary-light transition",children:"âž• Add Blog"})]}),N?e.jsx("p",{className:"text-gray-500",children:"Loading blogs..."}):u.length===0?e.jsx("p",{className:"text-gray-500",children:"No blogs found."}):e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b text-left",children:"Title"}),e.jsx("th",{className:"p-3 border-b text-left",children:"Description"}),e.jsx("th",{className:"p-3 border-b text-left",children:"Image"}),e.jsx("th",{className:"p-3 border-b text-right",children:"Actions"})]})}),e.jsx("tbody",{children:u.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition border-b",children:[e.jsx("td",{className:"p-3 font-medium",children:t.title}),e.jsxs("td",{className:"p-3 text-sm text-gray-600",children:[t.description||t.content.slice(0,60),"..."]}),e.jsx("td",{className:"p-3",children:t.image&&e.jsx("img",{src:`${window.location.origin}${t.image}`,alt:t.title,className:"w-20 h-16 object-cover rounded"})}),e.jsxs("td",{className:"p-3 text-right flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>y(t),className:"bg-blue-500 text-white p-2 rounded hover:bg-blue-600",title:"View Details",children:e.jsx(M,{size:18})}),e.jsx("button",{onClick:()=>i(t),className:"bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600",title:"Edit Blog",children:e.jsx(P,{size:18})}),e.jsx("button",{onClick:()=>S(t._id),className:"bg-red-600 text-white p-2 rounded hover:bg-red-700",title:"Delete Blog",children:e.jsx(z,{size:18})})]})]},t._id))})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[500px] max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl font-bold text-primary mb-4",children:o.title}),o.image&&e.jsx("img",{src:`${window.location.origin}${o.image}`,alt:o.title,className:"w-full h-64 object-cover rounded mb-4"}),e.jsxs("p",{className:"text-gray-700 mb-3",children:[e.jsx("b",{children:"Description:"})," ",o.description]}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:o.content}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:()=>y(null),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("form",{onSubmit:D,className:"bg-white p-6 rounded-lg shadow-lg w-96 space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-primary",children:"âœï¸ Edit Blog"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>i({...a,title:t.target.value}),className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"text",value:a.description||"",placeholder:"Short Description",onChange:t=>i({...a,description:t.target.value}),className:"w-full border rounded px-3 py-2"}),e.jsx("textarea",{value:a.content,onChange:t=>i({...a,content:t.target.value}),rows:5,className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"file",onChange:t=>{const l=t.target.files[0];g(l),p(l?URL.createObjectURL(l):null)},className:"w-full"}),f?e.jsx("img",{src:f,alt:"New Preview",className:"w-28 h-20 object-cover rounded"}):a.image&&e.jsx("img",{src:`${window.location.origin}${a.image}`,alt:"Current",className:"w-28 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>{i(null),g(null),p(null)},className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary-light",children:"Save"})]})]})})]})}export{U as default};
