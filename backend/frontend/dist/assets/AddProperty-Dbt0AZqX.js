import{r as s,j as e,I as y}from"./index-CfCkLG1r.js";import{A as b}from"./AdminActionLoader-DHNSVtwB.js";function w({onSuccess:d}){const[a,p]=s.useState({title:"",description:"",price:"",location:""}),[i,m]=s.useState([]),[l,u]=s.useState(null),[n,x]=s.useState(""),[f,h]=s.useState(!1),o=t=>{p({...a,[t.target.name]:t.target.value})},g=async t=>{t.preventDefault(),h(!0);const r=new FormData;r.append("title",a.title),r.append("description",a.description),r.append("price",a.price),r.append("location",a.location),i.forEach(c=>r.append("images",c)),l&&r.append("video",l);try{await y(r),x("✅ Property created successfully!"),p({title:"",description:"",price:"",location:""}),m([]),u(null),d&&d()}catch(c){console.error(c),x("❌ Error creating property")}finally{h(!1)}};return e.jsxs("div",{className:"relative max-w-[800px] mx-auto bg-white shadow-lg rounded-lg p-6",children:[f&&e.jsx(b,{message:"Adding Property..."}),e.jsx("h2",{className:"text-2xl font-bold text-primary mb-4",children:"Add New Property"}),n&&e.jsx("p",{className:`mb-4 ${n.startsWith("✅")?"text-green-600":"text-red-600"}`,children:n}),e.jsxs("form",{onSubmit:g,encType:"multipart/form-data",className:"space-y-4",children:[e.jsx("input",{type:"text",name:"title",placeholder:"Property Title",value:a.title,onChange:o,required:!0,className:"w-full border rounded px-3 py-2"}),e.jsx("textarea",{name:"description",placeholder:"Description",value:a.description,onChange:o,rows:4,className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"number",name:"price",placeholder:"Price",value:a.price,onChange:o,required:!0,className:"w-full border rounded px-3 py-2"}),e.jsx("input",{type:"text",name:"location",placeholder:"Location",value:a.location,onChange:o,className:"w-full border rounded px-3 py-2"}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Images"}),e.jsx("input",{type:"file",multiple:!0,onChange:t=>m(Array.from(t.target.files)),className:"w-full"}),i.length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:i.map((t,r)=>e.jsx("img",{src:URL.createObjectURL(t),alt:"Preview",className:"w-24 h-20 object-cover rounded-md border"},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Video"}),e.jsx("input",{type:"file",accept:"video/*",onChange:t=>u(t.target.files[0]),className:"w-full"}),l&&e.jsx("div",{className:"mt-2",children:e.jsx("video",{src:URL.createObjectURL(l),controls:!0,className:"w-full rounded-md"})})]}),e.jsx("button",{type:"submit",className:"bg-primary text-white px-6 py-2 rounded hover:bg-primary-light transition",children:"➕ Add Property"})]})]})}export{w as default};
